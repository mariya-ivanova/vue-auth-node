(function(e){function t(t){for(var n,s,l=t[0],c=t[1],i=t[2],p=0,b=[];p<l.length;p++)s=l[p],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&b.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(b.length)b.shift()();return o.push.apply(o,i||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,l=1;l<a.length;l++){var c=a[l];0!==r[c]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},o=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);var n=a("7a23");const r={id:"app",class:"container-fluid"},o=Object(n["f"])("h1",null,"Simple authentication example",-1),s={class:"auth-wrapper row"},l={class:"auth-inner col-md-6"};function c(e,t,a,c,i,u){const p=Object(n["v"])("Nav"),b=Object(n["v"])("router-view");return Object(n["r"])(),Object(n["e"])("div",r,[Object(n["h"])(p),o,Object(n["f"])("div",s,[Object(n["f"])("div",l,[Object(n["h"])(b)])])])}const i={class:"navbar navbar-expand-lg navbar-light bg-light"},u={class:"container-fluid"},p={class:"collapse navbar-collapse",id:"navbarNav"},b=Object(n["g"])("Home"),d={key:0,class:"navbar-nav"},m={class:"nav-item"},f=Object(n["g"])("Login"),j={class:"nav-item"},O=Object(n["g"])("Sign in"),h={key:1,class:"navbar-nav"},v={class:"nav-item"};function g(e,t,a,r,o,s){const l=Object(n["v"])("router-link");return Object(n["r"])(),Object(n["e"])("nav",i,[Object(n["f"])("div",u,[Object(n["f"])("div",p,[Object(n["h"])(l,{to:"/",class:"nav-link active","aria-current":"page"},{default:Object(n["B"])(()=>[b]),_:1}),e.user?Object(n["d"])("",!0):(Object(n["r"])(),Object(n["e"])("ul",d,[Object(n["f"])("li",m,[Object(n["h"])(l,{to:"/login",class:"nav-link"},{default:Object(n["B"])(()=>[f]),_:1})]),Object(n["f"])("li",j,[Object(n["h"])(l,{to:"/register",class:"nav-link"},{default:Object(n["B"])(()=>[O]),_:1})])])),e.user?(Object(n["r"])(),Object(n["e"])("ul",h,[Object(n["f"])("li",v,[Object(n["f"])("a",{href:"javascript:void(0)",onClick:t[0]||(t[0]=(...e)=>s.handleClick&&s.handleClick(...e)),class:"nav-link"},"Logout")])])):Object(n["d"])("",!0)])])])}var y=a("5502"),w={name:"Nav",methods:{handleClick(){localStorage.removeItem("token"),this.$store.dispatch("user",null),this.$router.push("/")}},computed:{...Object(y["b"])(["user"])}},S=a("6b0d"),k=a.n(S);const x=k()(w,[["render",g]]);var P=x,I={name:"App",computed:{...Object(y["b"])(["user"])},async created(){console.log(localStorage.getItem("token")),localStorage.getItem("token")&&this.$store.dispatch("user",{email:this.user.email})},components:{Nav:P}};a("ef9a");const _=k()(I,[["render",c]]);var C=_,E=a("6605");const H={key:0},N={key:1};function $(e,t,a,r,o,s){return Object(n["r"])(),Object(n["e"])("div",null,[e.user?(Object(n["r"])(),Object(n["e"])("h3",H,"Hello "+Object(n["x"])(e.user.email),1)):Object(n["d"])("",!0),e.user?Object(n["d"])("",!0):(Object(n["r"])(),Object(n["e"])("h3",N,"You are not logged in."))])}var z={name:"Home",computed:{...Object(y["b"])(["user"])}};const L=k()(z,[["render",$]]);var A=L;const B=Object(n["f"])("h2",null,"Login",-1),J={class:"form-group"},M=Object(n["f"])("label",{for:"exampleInputEmail1"},"Email address",-1),T=Object(n["f"])("small",{id:"emailHelp",class:"form-text text-muted"},"We'll never share your email with anyone else.",-1),U={class:"form-group"},V=Object(n["f"])("label",{for:"exampleInputPassword1"},"Password",-1),R=Object(n["f"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function D(e,t,a,r,o,s){return Object(n["r"])(),Object(n["e"])(n["a"],null,[B,Object(n["f"])("form",{onSubmit:t[2]||(t[2]=Object(n["D"])((...e)=>s.handleSubmit&&s.handleSubmit(...e),["prevent"]))},[Object(n["f"])("div",J,[M,Object(n["C"])(Object(n["f"])("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),class:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"},null,512),[[n["z"],o.email]]),T]),Object(n["f"])("div",U,[V,Object(n["C"])(Object(n["f"])("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),class:"form-control",id:"exampleInputPassword1",placeholder:"Password"},null,512),[[n["z"],o.password]])]),R],32)],64)}var W={name:"Login",data(){return{email:"",password:""}},methods:{async handleSubmit(){console.log("email: "+this.email);const e=await fetch("auth/login",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer"},body:JSON.stringify({email:this.email,password:this.password})}),t=await e.json();t.access_token&&(localStorage.setItem("token",t.access_token),this.$store.dispatch("user",{email:this.email}),this.$router.push("/"))}}};const Y=k()(W,[["render",D]]);var q=Y;const F=Object(n["f"])("h1",null,"Register",-1),G={class:"form-group"},K=Object(n["f"])("label",{for:"exampleInputEmail1"},"Email address",-1),Q=Object(n["f"])("small",{id:"emailHelp",class:"form-text text-muted"},"We'll never share your email with anyone else.",-1),X={class:"form-group"},Z=Object(n["f"])("label",{for:"exampleInputPassword1"},"Password",-1),ee=Object(n["f"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function te(e,t,a,r,o,s){return Object(n["r"])(),Object(n["e"])(n["a"],null,[F,Object(n["f"])("form",{onSubmit:t[2]||(t[2]=Object(n["D"])((...e)=>s.handleSubmit&&s.handleSubmit(...e),["prevent"]))},[Object(n["f"])("div",G,[K,Object(n["C"])(Object(n["f"])("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),class:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"},null,512),[[n["z"],o.email]]),Q]),Object(n["f"])("div",X,[Z,Object(n["C"])(Object(n["f"])("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),class:"form-control",id:"exampleInputPassword1",placeholder:"Password"},null,512),[[n["z"],o.password]])]),ee],32)],64)}var ae={name:"Register",data(){return{email:"",password:""}},methods:{async handleSubmit(){const e=await fetch("auth/register",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:this.email,password:this.password})});console.log(e.json()),await this.$router.push("/login")}}};const ne=k()(ae,[["render",te]]);var re=ne;const oe=[{path:"/",name:"Home",component:A},{path:"/login",name:"Login",component:q},{path:"/register",name:"Register",component:re}],se=Object(E["a"])({history:Object(E["b"])("/"),routes:oe});var le=se;const ce={user:null},ie=Object(y["a"])({state:ce,getters:{user:e=>e.user},actions:{user(e,t){e.commit("user",t)}},mutations:{user(e,t){e.user=t}}});var ue=ie;Object(n["c"])(C).use(le).use(ue).mount("#app")},ef9a:function(e,t,a){"use strict";a("feee")},feee:function(e,t,a){}});
//# sourceMappingURL=app.728fdfcd.js.map